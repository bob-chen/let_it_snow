!function(e){var t={speed:0,interaction:!0,size:2,count:200,opacity:0,color:"#ffffff",windPower:0,images:!1};e.fn.let_it_snow=function(a){function i(){l.clearRect(0,0,d.width,d.height);for(var e=0;m>e;e++){var t=h[e],a=w,o=f,s=100,c=t.x,g=t.y,p=Math.sqrt((c-a)*(c-a)+(g-o)*(g-o));if(s>p){var v=s/(p*p),u=(a-c)/p,M=(o-g)/p,y=v/2;t.velX-=y*u,t.velY-=y*M}else switch(t.velX*=.98,t.velY<=t.speed&&(t.velY=t.speed),r.windPower){case!1:t.velX+=Math.cos(t.step+=.05)*t.stepSize;break;case 0:t.velX+=Math.cos(t.step+=.05)*t.stepSize;break;default:t.velX+=.01+r.windPower/100}var z=r.color,A=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,x=A.exec(z),F=parseInt(x[1],16)+","+parseInt(x[2],16)+","+parseInt(x[3],16);t.y+=t.velY,t.x+=t.velX,(t.y>=d.height||t.y<=0)&&n(t),(t.x>=d.width||t.x<=0)&&n(t),0==r.images?(l.fillStyle="rgba("+F+","+t.opacity+")",l.beginPath(),l.arc(t.x,t.y,t.size,0,2*Math.PI),l.fill()):l.drawImage(r.imageItems[e%r.imageNum],t.x,t.y,2*t.size,2*t.size)}requestAnimationFrame(i)}function n(e){if(0==r.windPower||0==r.windPower)e.x=Math.floor(Math.random()*d.width),e.y=0;else if(r.windPower>0){var t=Array(Math.floor(Math.random()*d.width),0),a=Array(0,Math.floor(Math.random()*d.height)),i=Array(t,a),n=i[Math.floor(Math.random()*i.length)];e.x=n[0],e.y=n[1]}else{var t=Array(Math.floor(Math.random()*d.width),0),a=Array(d.width,Math.floor(Math.random()*d.height)),i=Array(t,a),n=i[Math.floor(Math.random()*i.length)];e.x=n[0],e.y=n[1]}e.size=3*Math.random()+r.size,e.speed=1*Math.random()+r.speed,e.velY=e.speed,e.velX=0,e.opacity=.5*Math.random()+r.opacity}function o(){for(var t=0;m>t;t++){var a=Math.floor(Math.random()*d.width),n=Math.floor(Math.random()*d.height),o=3*Math.random()+r.size,s=1*Math.random()+r.speed,l=.5*Math.random()+r.opacity;h.push({speed:s,velY:s,velX:0,x:a,y:n,size:o,stepSize:Math.random()/30,step:0,angle:180,opacity:l})}r.imageItems=[];var w=e("img.lis_flake");for(t=0;t<w.length;t++)r.imageItems.push(w.get(t));r.imageNum=w.length,i()}var r=e.extend({},t,a),s=e(this),h=[],d=s.get(0),l=d.getContext("2d"),m=r.count,w=-100,f=-100;if(d.width=window.innerWidth,d.height=window.innerHeight,s.on("letItSnow.set",function(e,t,a){r[t]=a}),function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};window.requestAnimationFrame=e}(),0!=r.images)for(var c=0;c<r.images.length;c++)e("<img src='"+r.images[c]+"' style='display: none' class='lis_flake'>").prependTo(r.wrapper);o(),e(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){el2=s.clone(),el2.insertAfter(s),s.remove(),el2.let_it_snow(r)},200)}),1==r.interaction&&d.addEventListener("mousemove",function(e){w=e.clientX,f=e.clientY})}}(window.jQuery);